(this["webpackJsonpakun-portal"]=this["webpackJsonpakun-portal"]||[]).push([[0],{10:function(e,t,a){e.exports={node:"ChoiceNode_node__2iCfm",header:"ChoiceNode_header__RtUqj",title:"ChoiceNode_title__hVC-b",closedState:"ChoiceNode_closedState__158Fe",count:"ChoiceNode_count__yWLEJ",date:"ChoiceNode_date__3aWCu",body:"ChoiceNode_body__3GK0y",table:"ChoiceNode_table__1dpyi",open:"ChoiceNode_open__3D_Cr",choice:"ChoiceNode_choice__14TtS",unselected:"ChoiceNode_unselected__2AVEJ",selected:"ChoiceNode_selected__2uEqM",pending:"ChoiceNode_pending__3Ta0Y",xOut:"ChoiceNode_xOut__3fa5X",countHeader:"ChoiceNode_countHeader__1fCP8",vote:"ChoiceNode_vote__1korm",value:"ChoiceNode_value__3rE0n",xOutReason:"ChoiceNode_xOutReason__2wNhD"}},48:function(e,t,a){e.exports=a(92)},53:function(e,t,a){},58:function(e,t){},60:function(e,t){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},9:function(e,t,a){e.exports={backdrop:"LoadingScreen_backdrop__33_hS",verticalCenter:"LoadingScreen_verticalCenter__3N_6G",centerPadding:"LoadingScreen_centerPadding__1jDA0",content:"LoadingScreen_content__Zr6FU",spiral:"LoadingScreen_spiral__3s1-M",spiral1:"LoadingScreen_spiral1__3jnQZ",spin1:"LoadingScreen_spin1__3dTYc",spiral2:"LoadingScreen_spiral2__QXFn8",spin2:"LoadingScreen_spin2__35kI8",spiral3:"LoadingScreen_spiral3__O53Hl",spin3:"LoadingScreen_spin3__ZpOol",a:"LoadingScreen_a__3zapJ",tagLine:"LoadingScreen_tagLine__3S2JJ"}},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(42),o=a.n(c),s=(a(53),a(1)),i=a.n(s),l=a(4),u=a(2),d=a(3),m=a(7),h=a(5),f=a(8),v=new(a(47).a)({protocol:"https:",hostname:"fiction.live",connection:{hostname:"rt.fiction.live"}});window.akun=v;var p=v,E=(a(76),a(23)),y=a.n(E),_=a(9),g=a.n(_);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var S=r.a.createElement("g",{transform:"translate(0.000000,370.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},r.a.createElement("path",{d:"M1825 3524 c-165 -34 -259 -70 -367 -139 -442 -286 -557 -875 -257 -1312 43 -62 160 -179 223 -223 33 -22 45 -35 35 -38 -7 -3 -16 -8 -19 -12 -3 -4 -54 -15 -114 -24 -93 -15 -121 -16 -190 -6 -200 29 -337 94 -475 224 -188 179 -273 476 -210 744 9 42 16 78 15 79 -6 7 -81 -160 -103 -227 -99 -313 -13 -675 217 -909 82 -83 90 -90 170 -142 125 -81 262 -127 412 -137 180 -12 326 11 466 74 29 13 55 24 57 24 19 0 -19 -121 -65 -212 -91 -179 -264 -322 -470 -389 -86 -28 -254 -36 -366 -19 -47 7 -87 17 -90 22 -3 4 -12 8 -21 8 -48 0 -229 113 -306 191 -38 39 -54 50 -41 27 90 -154 199 -269 339 -355 63 -39 151 -80 190 -88 17 -4 41 -11 55 -16 109 -39 360 -35 495 8 127 40 271 119 355 195 38 34 136 152 167 200 75 117 132 296 145 457 l3 34 54 -54 c149 -151 224 -334 224 -549 0 -178 -45 -321 -147 -463 -101 -143 -212 -219 -416 -288 l-85 -29 95 5 c419 25 737 279 852 681 31 107 33 352 4 458 -57 211 -178 393 -345 518 -31 23 -60 45 -65 49 -11 9 23 27 71 36 21 5 108 8 193 7 172 -1 220 -12 349 -81 89 -47 126 -76 199 -152 102 -106 186 -269 207 -398 21 -126 8 -290 -30 -398 -14 -38 24 20 60 93 87 177 110 427 59 632 -21 83 -105 256 -153 318 -67 84 -152 164 -226 213 -63 42 -111 66 -228 113 -65 26 -252 49 -342 42 -143 -12 -270 -46 -363 -98 -42 -23 -43 -23 -38 7 21 117 107 272 204 370 75 76 174 147 234 167 18 6 38 14 43 19 6 4 48 17 95 29 92 23 302 30 337 12 10 -6 35 -13 55 -16 104 -16 237 -92 347 -198 l65 -63 -29 50 c-16 28 -35 56 -42 63 -7 7 -13 18 -13 23 0 12 -175 188 -205 207 -114 71 -160 95 -225 117 -3 1 -12 4 -20 8 -65 26 -151 40 -260 44 -125 5 -191 -2 -285 -30 -27 -7 -57 -16 -65 -18 -51 -14 -216 -109 -278 -160 -181 -149 -308 -387 -329 -616 -3 -35 -9 -63 -13 -63 -15 0 -109 110 -145 170 -170 280 -149 649 52 897 113 139 240 224 411 273 l67 19 -80 -1 c-44 0 -89 -2 -100 -4z"})),w=function(e){var t=e.svgRef,a=e.title,n=b(e,["svgRef","title"]);return r.a.createElement("svg",N({width:"370.000000pt",height:"370.000000pt",viewBox:"0 0 370.000000 370.000000",preserveAspectRatio:"xMidYMid meet",ref:t},n),a?r.a.createElement("title",null,a):null,S)},T=r.a.forwardRef((function(e,t){return r.a.createElement(w,N({svgRef:t},e))})),O=(a.p,y.a.bind(g.a));function j(){return r.a.createElement("div",{className:g.a.backdrop},r.a.createElement("div",{className:g.a.centerPadding}),r.a.createElement("div",{className:g.a.verticalCenter},r.a.createElement("div",{className:g.a.centerPadding}),r.a.createElement("div",{className:g.a.content},r.a.createElement(T,{className:O(g.a.spiral,"spiral1")}),r.a.createElement(T,{className:O(g.a.spiral,"spiral2")}),r.a.createElement(T,{className:O(g.a.spiral,"spiral3")}),r.a.createElement("div",{className:g.a.a},"A"),r.a.createElement("div",{className:g.a.tagLine},"Crawling through the portal...")),r.a.createElement("div",{className:g.a.centerPadding})),r.a.createElement("div",{className:g.a.centerPadding}))}var k=a(6);a(77);function C(e,t){var a,n,r=t&&t.width,c=null!==(a=t&&t.width)&&void 0!==a?a:r,o=null===(n=t&&t.crop)||void 0===n||n,s=new URL(e);switch(!0){case s.host.endsWith("filepicker.io"):var i=s.pathname.match(/^\/api\/file\/([\w.-]+?)(?:\/convert)?$/);if(!i)throw new Error("Couldn't parse image url: ".concat(e));var l=i[1];s.search="",t?(s.pathname="/api/file/".concat(l,"/convert"),s.searchParams.append("h",c),s.searchParams.append("w",r),s.searchParams.append("fit",o?"crop":"max")):s.pathname="/api/file/".concat(l);break;case s.host.endsWith(".cloudfront.net"):s.host="cdn.fiction.live";var u=s.pathname.match(/^\/images\/([\w.-]+?)$/);if(!u)throw new Error("Couldn't parse image url: ".concat(e));var d=u[1];s.search="",s.pathname=t?o?"/h".concat(c,"-w").concat(r,"-cfill/images/").concat(d):"/h".concat(c,"-w").concat(r,"/images/").concat(d):"/images/".concat(d);break;default:return console.warn("Couldn't parse image url: ".concat(e)),e}return s.toString()}a(78);function x(e){var t=e.data,a=e.showStory,n=e.onMouseEnter,c=e.onMouseLeave,o={width:64,height:64,crop:!0},s=null;t.i&&(s=Array.isArray(t.i)?C(t.i[0],o):C(t.i,o));var i=function(e){var t=e.match(/\b[A-z:']/g);return t?t.join(""):(console.warn("Could not derive short name for ".concat(e)),"X")}(t.t),l="short-name-large";return i.length>3&&(l="short-name-medium"),i.length>5&&(l="short-name-small"),r.a.createElement("div",{className:"nav-bar-story",onClick:function(){a(t._id)},onMouseEnter:function(e){n(t,e.currentTarget.offsetTop)},onMouseLeave:function(){c(t)}},r.a.createElement("div",{className:"short-name ".concat(l)},i),s&&r.a.createElement("img",{src:s,alt:"",className:"icon"}))}a(79);function L(e){var t=e.story,a=e.position;return r.a.createElement("div",{className:"nav-bar-story-info",style:{top:"".concat(a,"px")}},r.a.createElement("div",{className:"pointer"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.t}})))}var P={story:null,storyPosition:0,scrollTop:0};function I(e,t){var a=t.story,n=t.storyPosition,r=t.scrollTop;return{story:void 0===a?e.story:a,storyPosition:null!==n&&void 0!==n?n:e.storyPosition,scrollTop:null!==r&&void 0!==r?r:e.scrollTop}}function R(e){var t=e.liveStories,a=e.showStory,c=Object(n.useRef)(null),o=Object(n.useReducer)(I,P),s=Object(k.a)(o,2),i=s[0],l=s[1],u=function(e,t){l({story:e,storyPosition:t})},d=function(e){e===i.story&&l({story:null})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement("div",{className:"content",ref:c,onScroll:function(){l({scrollTop:c.current.scrollTop})}},t.map((function(e){return r.a.createElement(x,{key:e._id,data:e,showStory:a,onMouseEnter:u,onMouseLeave:d})})))),r.a.createElement("div",{className:"nav-bar-overlay"},i.story&&r.a.createElement(L,{story:i.story,position:i.storyPosition-i.scrollTop+32})))}a(80),a(81);function M(e){var t=e.client,a=Object(n.useState)(t.chatThread.usersCount),c=Object(k.a)(a,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var e=function(e){s(e)};return t.chatThread.on("usersCount",e),s(t.chatThread.usersCount),function(){t.chatThread.off("usersCount",e)}}),[t]),r.a.createElement("div",{className:"chat-header"},r.a.createElement("div",{className:"title"},"Chat"),r.a.createElement("div",{className:"user-count"},o," users"))}a(82),a(83);function D(e){return e.toLocaleString()}function H(e){var t=e.node;if(t.userId){if("Anon"===t.username)return r.a.createElement("span",{className:"username"},t.username," (",t.userId,")");var a=t.avatar&&C(t.avatar,{width:16,height:16});return r.a.createElement("a",{href:"https://fiction.live/user/".concat(t.username)},a?r.a.createElement("img",{alt:"",className:"avatar",src:a}):null,r.a.createElement("span",{className:"username"},t.username))}return r.a.createElement("span",{className:"username"},t.username)}function A(e){var t=e.node,a=e.onImageLoad,n=e.onImageLoadError;return r.a.createElement("div",{className:"chat-node"},r.a.createElement("div",{className:"info"},r.a.createElement(H,{node:t}),r.a.createElement("span",{className:"date"},D(new Date(t.createdTime)))),t.data.i&&r.a.createElement("img",{alt:"[failed to load]",className:"image",src:C(t.data.i),onLoad:a,onError:n}),t.body&&r.a.createElement("div",{className:"body"},function(e){try{return e.toString().split("\n").map((function(e,t){var a=">"===e.charAt(0),n="some-dumb-string-nobody-would-use-".concat(Math.random()),c=e.replace(/https?:\/\/\S+/gi,(function(e){return"".concat(n).concat(e).concat(n)})).split(n).map((function(e,t){return/https?:\/\/\S+/i.test(e)?r.a.createElement("a",{key:t+e,href:e},e):e}));return r.a.createElement("div",{key:t+e,className:a?"green-text":""},c)}))}catch(t){return console.log(t),r.a.createElement("div",{style:{color:"red"}}," ",t.toString())}}(t.body)))}function U(e){var t=e.client,a=Object(n.useRef)(null),c=Object(n.useRef)(null),o=Object(n.useState)(t.chatThread.history.nodes),s=Object(k.a)(o,2),i=s[0],l=s[1],u=Object(n.useState)(!0),d=Object(k.a)(u,2),m=d[0],h=d[1],f=function(){m&&c.current.scrollIntoView()},v=function(){f()},p=function(){f()};return Object(n.useEffect)(f),Object(n.useEffect)((function(){var e=function(){l(t.chatThread.history.nodes.slice())},a=function(){l(t.chatThread.history.nodes.slice())};return t.chatThread.on("chat",e),t.chatThread.on("chatUpdated",a),h(!0),l(t.chatThread.history.nodes.slice()),function(){t.chatThread.off("chat",e),t.chatThread.off("chatUpdated",a)}}),[t]),r.a.createElement("div",{className:"chat-history",ref:a,onScroll:function(){var e=a.current,t=e.scrollHeight,n=e.scrollTop,r=e.clientHeight;h(t-r-n<=0)}},null===i||void 0===i?void 0:i.map((function(e){return r.a.createElement(A,{key:e.id,node:e,onImageLoad:v,onImageLoadError:p})})),r.a.createElement("div",{ref:c}))}var J=a(22),V=a(13),F=(a(84),{textarea:""});function W(e,t){var a=t.field,n=t.value;return Object(V.a)({},e,Object(J.a)({},a,n))}function z(e){var t=e.postChat,a=Object(n.useRef)(null),c=Object(n.useReducer)(W,F),o=Object(k.a)(c,2),s=o[0],i=o[1],l=function(){var e=a.current.value;e.length>0&&(i({field:"textarea",value:""}),t(e))};return Object(n.useEffect)((function(){var e=a.current;e.style.height="inherit",e.style.height="".concat(e.scrollHeight+2,"px")})),r.a.createElement("form",{className:"chat-input",onSubmit:function(e){e.preventDefault(),l()}},r.a.createElement("textarea",{ref:a,name:"textarea",value:s.textarea,placeholder:"Message",rows:"1",onKeyDown:function(e){"Enter"!==e.key||e.altKey||e.shiftKey||e.ctrlKey||(e.preventDefault(),l())},onChange:function(e){i({field:e.target.name,value:e.target.value})}}))}function K(e){var t=e.client,a=t.postChat.bind(t);return r.a.createElement("div",{className:"chat"},r.a.createElement(M,{client:t}),r.a.createElement(U,{client:t}),r.a.createElement(z,{postChat:a}))}a(85);function q(e){var t=e.node,a=t.body;return a=a.replace(/(<img.*?src=")(https?:\/\/[A-z0-9/.]+)(".*?>)/g,(function(e,t,a,n){return"".concat(t).concat(C(a)).concat(n)})),r.a.createElement("div",{className:"chapter-node"},r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"title"}),r.a.createElement("span",{className:"date"},D(new Date(t.createdTime)))),r.a.createElement("div",{className:"body",dangerouslySetInnerHTML:{__html:a}}))}var B=a(10),G=a.n(B),X=y.a.bind(G.a);function Y(e){var t=e.choice,a=e.choiceNodeId,c=e.startsSelected,o=Object(n.useState)(c),s=Object(k.a)(o,2),i=s[0],l=s[1];return r.a.createElement("tr",{className:X("choice",i,{xOut:t.xOut}),onClick:function(){switch(i){case"pending":return;case"selected":p.removeVote(a,t.choiceId).then((function(){l("unselected")})).catch((function(){l("selected")}));break;case"unselected":p.vote(a,t.choiceId).then((function(){l("selected")})).catch((function(){l("unselected")}));break;default:return void console.warn("ChoiceNode in unexpected selectedState: ".concat(i))}l("pending")}},r.a.createElement("td",{className:G.a.vote},r.a.createElement("div",{className:G.a.value},t.value),t.xOutReason&&r.a.createElement("div",{className:G.a.xOutReason},t.xOutReason)),r.a.createElement("td",{className:G.a.count},t.countVerified,"/",t.count))}function Z(e){var t,a=e.node,n=a.choices.filter((function(e){return!(e.xOut&&"permanentlyRemoved"===e.value)})),c=[],o=[];return n.forEach((function(e){e.xOut?o.push(e):c.push(e)})),r.a.createElement("div",{className:G.a.node},r.a.createElement("div",{className:G.a.header},r.a.createElement("span",{className:G.a.title},"Choice -\xa0"),a.closed&&r.a.createElement("span",{className:G.a.closedState},"Voting closed -\xa0"),r.a.createElement("span",{className:G.a.count},(t=a.voterCount)>1?"".concat(t," voters"):1===t?"1 voter":"be the first to vote."),r.a.createElement("span",{className:G.a.date},D(new Date(a.createdTime)))),r.a.createElement("div",{className:X("body",{open:!a.closed})},r.a.createElement("table",{className:G.a.table},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{className:G.a.countHeader},"Votes")),c.concat(o).map((function(e){return r.a.createElement(Y,{key:e.choiceId,choice:e,choiceNodeId:a.id,startsSelected:"unselected"})}))))))}var $=a(12),Q=a.n($);a(86);function ee(e){var t=e.dice,a=e.vote;return r.a.createElement("div",{className:"entry"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}),a&&r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}))}function te(e){var t=e.vote;return r.a.createElement("div",{className:"entry"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}function ae(e){var t,a=e.node,n=a.dice&&Object.keys(a.dice),c=a.votes&&Object.keys(a.votes),o=Q.a.uniq(n,c).length;return t=o>1?"".concat(o," posts"):1===o?"1 post":"be the first to post.",r.a.createElement("div",{className:"reader-post-node"},r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"title"},"Reader Posts -\xa0"),a.closed&&r.a.createElement("span",{className:"closed-state"},"Closed -\xa0"),r.a.createElement("span",{className:"count"},t),r.a.createElement("span",{className:"date"},D(new Date(a.createdTime)))),r.a.createElement("div",{className:"body"},a.dice&&r.a.createElement("div",{className:"dice"},n.map((function(e){return r.a.createElement(ee,{key:e,dice:a.dice[e],vote:a.votes&&a.votes[e]})}))),a.votes&&r.a.createElement("div",{className:"votes"},c.filter((function(e){return!n.includes(e)})).map((function(e){return r.a.createElement(te,{key:e,vote:a.votes[e]})})))))}a(87),a(88),a(89);function ne(e){var t=e.tags,a=e.spoilerTags;return r.a.createElement("div",{className:"tag-list"},r.a.createElement("span",{className:"label"},"TAGS:"),t&&t.map((function(e){return r.a.createElement("span",{className:"tag ".concat(a.includes(e)?"spoiler":""),key:e},e)})))}function re(e){var t=e.user,a=t.a&&C(t.a,{width:32,height:32});return r.a.createElement("div",{className:"author"},r.a.createElement("a",{href:"https://fiction.live/user/".concat(t.n)},a?r.a.createElement("img",{alt:"",className:"avatar",src:a}):null,r.a.createElement("span",{className:"username"},t.n)))}function ce(e){var t=e.metaData,a=null;return Array.isArray(t.i)?a=t.i[0]:t.i&&(a=t.i),a&&(a=C(a)),r.a.createElement("div",{className:"story-header"},r.a.createElement("h1",{className:"title",dangerouslySetInnerHTML:{__html:t.t}}),a&&r.a.createElement("img",{alt:"",className:"cover",src:a,key:a}),r.a.createElement("div",{className:"authors"},t.u.filter((function(e){return e.n})).map((function(e){return r.a.createElement(re,{key:e.n,user:e})}))),r.a.createElement(ne,{tags:t.ta,spoilerTags:t.spoilerTags}),t.d&&r.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:t.d}}))}function oe(e){var t=e.client,a=Object(n.useState)(t.storyThread.history.nodes),c=Object(k.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)(t.storyThread.metaData),l=Object(k.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)((function(){var e=function(){s(t.storyThread.history.nodes.slice())},a=function(){s(t.storyThread.history.nodes.slice())},n=function(){s(t.storyThread.history.nodes.slice())},r=function(){s(t.storyThread.history.nodes.slice())},c=function(){s(t.storyThread.history.nodes.slice())},o=function(){s(t.storyThread.history.nodes.slice())},i=function(e){d(e)};return t.storyThread.on("chapter",e),t.storyThread.on("chapterUpdated",a),t.storyThread.on("choice",n),t.storyThread.on("choiceUpdated",r),t.storyThread.on("readerPost",c),t.storyThread.on("readerPostUpdated",o),t.storyThread.on("metaData",i),s(t.storyThread.history.nodes.slice()),d(t.storyThread.metaData),function(){t.storyThread.off("chapter",e),t.storyThread.off("chapterUpdated",a),t.storyThread.off("choice",n),t.storyThread.off("choiceUpdated",r),t.storyThread.off("readerPost",c),t.storyThread.off("readerPostUpdated",o),t.storyThread.off("metaData",i)}}),[t]);var m=0;return r.a.createElement("div",{className:"story"},r.a.createElement(ce,{metaData:u}),r.a.createElement("div",{className:"history"},o.map((function(e){switch(e.type){case"chapter":return r.a.createElement(q,{key:e.id,node:e});case"choice":return r.a.createElement(Z,{key:e.id,node:e});case"readerPost":return r.a.createElement(ae,{key:e.id,node:e});default:return r.a.createElement("div",{key:m++},"Unrecognised node type: ",e.type)}})),r.a.createElement("div",{className:"footer"})))}a(90);function se(e){return r.a.createElement("div",{className:"story-controls"},r.a.createElement("div",null,"Live Timer"),r.a.createElement("div",null,"Reviews"),r.a.createElement("div",null,"Follow"),r.a.createElement("div",null,"Pick chapter"))}a(91);function ie(e){var t=e.client;return r.a.createElement("div",{className:"story-view"},r.a.createElement(se,null),r.a.createElement(oe,{client:t}),r.a.createElement(K,{client:t}))}var le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={initPhase:!0,client:null,clientChatFreshEntry:!1,liveStories:[]},a.init(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"init",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([p.ephemeralUserIdPromise,this.joinPinnedStories()]);case 2:return e.t0=Promise,e.t1=this.showStory("vhHhMfskRnNDbxwzo"),e.next=6,this.updateLiveStories();case 6:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=10,e.t0.all.call(e.t0,e.t3);case 10:this.setState({initPhase:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinPinnedStories",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getStories("live",null);case 2:return t=e.sent,a=t.stories,e.abrupt("return",a.map((function(e){return p.join(e._id)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateLiveStories",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getStories("live",null);case 2:t=e.sent,a=t.stories,this.setState({liveStories:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showStory",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.join(t);case 2:a=e.sent,this.setState({client:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.initPhase?r.a.createElement(j,null):r.a.createElement("div",{className:"App"},r.a.createElement(R,{liveStories:this.state.liveStories,showStory:this.showStory.bind(this)}),this.state.client?r.a.createElement(ie,{client:this.state.client}):r.a.createElement("div",null,"Nothing to see here"))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.2f81978a.chunk.js.map